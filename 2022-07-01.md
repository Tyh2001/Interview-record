# 2022-07-01 面试复盘

## 面试阶段

面：你先自我介绍一下吧

我：……

面：你是去年毕业是是吗？

我：是的，去年毕业的

面：你是什么时候开始做开源项目的？

我：去年的八月份

面：是什么契机让你做开源项目的呢？

我：当时很多项目都使用 element 组件，当时也不是很了解那些组件是如何做出来的，也不清楚为什么在 vue 中写一个 el- 什么的标签就可以实现组件展示，后来就在 b 站上看到一个视频，讲解了一些组件的实现原理，后来就明白了组件是如何实现的，又去看了看那些组件库的源码，就都了解了，就开始自己做了

面：我看你的 fighting-design 项目的 Contributors 成员还是挺多的，你是如何组织这个团队如何开发的呢？

我：现在提交了大概 700 多次了，基本上前 300 次提交都是我自己在做，后来我去掘金上发了一些文章，后来又去群里分享了一波，就又很多人来加入了进来，后来我就创建了一个群，平时都是在群里进行分享的

面：那你能不能介绍一下你的 fighting-design 是如何设计的，中间有没有遇到过什么挑战，你是如何解决的呢？

我：组件设计方式的话，都是先从简单开始，我先用 figma 做出设计稿，在 github 发起 rfc，将设计稿和配置项都列举出来，还有一些参考文档，还有一些难点之类的，我都会列举出来，之后在群里给他们分享，然后有人就会想要参与这个组件，就有他来写，他写完之后我看过之后会给一些修改的建议再进行修改，或者有些组件直接我自己来写。然后有什么难点呢，之前有遇到过打包相关的问题，当时使用 rollup 进行打包，打包之后可以在 vue3 的项目中进行使用，但是这个项目再打包之后就会报很多类型的错误，后来找到原因就是，打包没有把类型打包进行，因为都是使用 ts 来写的，后来感觉 rollup 打包比较复杂，就改为使用 vite 打包了，将打包类型也都配置好了，就实现了打包，大概就是这样

面：rollup 相比 vite 复杂在哪里呢？

我：rollup 打包，比如打包 css、vue、ts 都需要专门的配置插件，都需要依赖它们才可以正常打包，但是 vite 底层使用的是 rollup，它内置集成的比较好，所以配置起来比较简单

面：那你有没有了解像 rollup、vite 这种新型的构建工具相比于 webpack 它们的区别是什么？

我：它们的区别不太了解

面：那么你自己项目中写业务的时候有没有使用 webpack？

我：webpack 现在用的很少，都是使用 vite

面：你是去年 5 月份才开始工作是吗？

我：是的，五月十号

面：你在做组件库的时候，我看你使用了 monorepo，那么这个 monorepo 是什么东西呢？

我：比如咱们按照以往的方式，要是写一个项目，组件库是一个项目，官方文档也是一个项目，这样的话可能就会分成两个仓库来管理，每次都需要拉取两次代码，安装两次依赖进行管理，这样就比较麻烦嘛，那么 monorepo 就是将文档、组件、样式什么的都混到一个项目中，通过 pnpm 统一管理依赖，将公共的依赖安装到最外层，然后每个项目还都有单独的依赖项，然后就可以通过一个命令将所有的依赖全部安装上了，方便管理

面：前面讲到的 pnpm 相对于 npm 还有什么区别吗？

我：它下载速度块，安装的 node_modules 体积非常的小

面：有没有了解底层的实现，或者说 pnpm 是如何做到这一点的？

我：这个了解过一些但是我现在不太记得了

面：你觉得你做的组件库和市面上流行的组件库有什么区别呢？

我：世面上大多数组件都已经成型了，比如一些新手也想去参与开源的贡献去提个 pr，那么已经成型的组件库可能不是很好入手，不太了解整体是一个什么样子的流程。正好我这个组件库我刚刚起步的一个，那么我可以从 0 到有带着你实现一个完整的组件。

面：你对于模块化的了解吗？

我：了解啊

面：那么你的组件库打包出来模块化是如何处理的呢？

我：模块化的话，我打包自动根据我的目录结构实现了啊。每个工具函数工具类都抽离出来了，然后在项目中进行安装，就可以再任何地方使用到了

面：就是我像问一下，你有没有考虑过兼容方面的问题呢？比如你的组件库能否在 ie8 的版本上走？考虑过这个问题吗？

我：因为现在不是微软已经不再维护了嘛，我现在只要把一些 Safari 浏览器、火狐浏览器、谷歌浏览器主流的浏览器兼容了就可以我感觉

面：但是主流的浏览器也是有比较老的版本，因为你现在使用的工具都是比较新的，那么不管它们的构建流程还都是比较新的。那么我再问的具体一点，那么有没有了解过 esModule 和 commonJs？

我：了解过，我现在打包都是使用 ES 打包的

面：esModule 是吗？

我：之后那些打包都会配置，都会加

面：那 esModule 和 commonJs 它们之间有什么区别有了解吗？

我：了解，比如 esModule 就是使用 import 导入，export default 导出。commonJs 使用 require 导入

面：你做组件库有没有写过单元测试？

我：写单元测试

面：你是如何实现的呢？

我：单元测试使用了两个工具，一个是 vitest 和 utils-test，这两个结合来使用的

面：具体是怎么做的呢？

我：比如组件都有很多的参数，就拿按钮组件来说，它可以通过不同的 type 来实现不同的样式展示，实现的方式是根据不同的类型进行 class 拼接，那么就测试传入不同的 type 能不能拼接成预期的 class 类名

面：你的组件里有没有用到过 slot？

我：用过啊，就是插槽啊

面：你能讲讲 vue 的插槽，或者你对插槽的理解

我：比如按钮组件，按钮组件中间有一段文字嘛，那么直接在组件的标签中写入内容，就可以插入你指定的 slot 的位置，还用到了具名插槽，给 slot 设置 name 属性，插槽使用 template 标记 name 属性，就可以插入指定 name 的位置

面：你的组件样式是怎么设计的？是你自己设计的吗？

我：对，自己设计，使用 figma

面：你对这种组件的设计规范有没有了解

我：我的规范就是，我有一套统一的色号，所有的组件都是遵循那一套标准的色号来进行设计的，还有一套规定的尺寸

面：你是怎么部署的？

我：是哪方面部署？

面：没事没事，你现在是纯 github 的开源代码是吧？

我：你说文档是怎么部署的吗？

面：对，是这个意思

我：文档的话我使用 vitepress 来写的，我本地打包之后，我有一个自己的服务器，直接打包放到服务器上就好了

面：你在公司使用的也是 vue3 吗？

我：vue3 和 vue2 都有

面：那么 vue3 和 vue2 有什么区别呢？

我：在模板层面的话，vue3 可以有多个根节点，vue2 只能有一个根节点。在 js 方面 vue3 新增了 setup 语法糖，composition API，声明周期钩子前面都加入了 on，没有了 this，比如计算属性和监视器都需要引入才能使用，还有响应式变量都需要通过 ref 进行包裹，底层方面更新了响应式 api，vue2 使用的是 Object.defineProperty，vue3 改用了 es6 新增的 proxy

面：proxy 相比 defineProperty 它的优势是什么？

我：defineProperty 的话只能监视到对象中某一个属性发生变化它才会执行内部的函数，proxy 可以监视到整个对象，这个对象中的任何一个属性发生变化它都可以执行

面：vue 是如何实现 data 里面的响应式？响应式原理有了解嘛

我：了解一些，用 ref 包裹之后就是一个响应式数据了，比如一个 p 标签里面有一段文字，用 proxy 监视到内部的文字发生变化它可能就会重新执行一下 innerText 赋值的操作，将新的对象属性重新 innerText 到这个标签里面。因为它可以监视到对象中的数据发生变化嘛，标签里面的文字就是对象里的文字，当它发生变化就会重新执行一下渲染的函数，大概这样

面：vue3 的 composition API 相比 vue2 的选项式 API 它的优势是什么呢？

我：vue2 的 option API 将生命周期啊，计算属性啊，监视器全部都在组件里面，就算你用不用它都会打包进去，影响打包体积，vue3 你需要什么引入什么，这样可以减少打包体积，主要这一点

面：我看你项目中有一个数字化全端 3D 云平台能介绍一下吗？

我：这个是我上一家公司自研的产品，里面有很多 3D 的东西，比如桌子，电脑什么的，3D 模型，我通过调用 3D 那边的接口我将 3D 展示到页面上可以进行拖动，看到各种的角度，还可以产生爆炸效果，看到它每一个零件是干什么的？

面：前端这一块是怎么实现的？

我：都是调用 3D 的接口，使用 canvas 来展示的

面：canvas 展示的，3D 的接口是指的什么？

我：3D 的接口，因为我们那边有 3D 的开发工程师，我们是协同配合开发的项目，他复杂写 3D，我负责调用它的接口进行展示

面：那么他返回给你的数据是什么样的数据？

我：大概就是对象类型的

面：你是怎么用 canvas 来渲染的呢？

我：我想想啊，这个不太记得了

面：那么你这边渲染层面实际上做的不多是吧？

我：对，其实主要是写业务

面：canvas 主要也没怎么写是吧？

我：对，主要调用它的接口，基本上可以直接展示了

面：你上面写的这些性能优化，讲讲吧，必须首屏加载之类的

我：当时性能还是比较差的，使用浏览器自带的灯塔工具可以测试性能的评分嘛，当时减少了一些依赖的引入，将那些第三方库的完整引入都变成按需引入了，然后组件改用了异步组件的方式，大概主要这种比较大型的性能优化，提示了大部分性能，还有一些小的优化

面：组件太大，是有多大啊？我不太能明白大的话能大到哪里去

我：大组件大概有 500 行代码左右吧，逻辑还是比较多的，比如首页，会由不同的展示状态，比如有 3 中展示状态，那么这三种展示状态都对应的 3 个组件，如果将这个三个组件全部引入进去，那么它都会全部打包进去，那么如果使用异步组件，按需引入的话，需要哪个使用哪个

面：异步组件按钮引入是如何实现的？

我：按需引入 vue 中有内置的 API 可以使用啊

面：

## 提问阶段
